"use strict";var _slicedToArray=function(){function e(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(c){o=!0,a=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw a}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),app=function(e){function r(){e.accessToken="pk.eyJ1Ijoib25ldGhydTIiLCJhIjoiY2lvOWNtMGkxMDMyNHY2a3FpMWZtejRvbCJ9.fvCj4Thw_6POMXE8FoMPWw",h=new e.Map({container:"map",style:"mapbox://styles/onethru2/ciodcjqry002btbmfiap0y5ue",center:[-98,40],zoom:4}),m=new e.Geocoder({flyTo:!1,placeholder:"Add a Location"}),h.addControl(m),m.on("result",o),h.addControl(new e.Navigation)}function t(){w=new Audio("IndianaJones.mp3"),w.volume=.2,$(".play-route").click(function(){l()}),$("#music").on("change",function(e){e.target.checked===!1?w.pause():x&&w.play()})}function n(){var e=!0,r=!1,t=void 0;try{for(var n,o=g[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;h.removeLayer(a),h.removeSource(a)}}catch(i){r=!0,t=i}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw t}}g=[]}function o(e){e.xy=a(e),b.push(e),b.length>=2&&$(".play-route").prop("disabled",!1),$("#locations").append("<li>"+e.result.text+"</li>"),m._clear()}function a(e){return[e.result.center[0],e.result.center[1]]}function i(e){var r="pt"+e.result.id;h.getSource(r)||(h.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),h.addLayer({id:r,source:r,type:"circle",paint:{"circle-radius":7,"circle-color":"red"}}),h.getSource(r).setData(e.result.geometry),g.push(r))}function u(e,r,t){for(var n=a(e),o=a(r),i=[n],u=Number((1/t).toFixed(4)),c=u,l=0;t>l;l++){var d=[s(n[0],o[0],c),s(n[1],o[1],c)];i.push(d),c+=u}return i.push(o),i}function c(){var e=[],r=!0,t=!1,n=void 0;try{for(var o,a=y(b)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=_slicedToArray(o.value,2),c=i[0],l=i[1];if(b.length<=c+1)break;e=e.concat(u(l,b[c+1],S))}}catch(s){t=!0,n=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(t)throw n}}return e}function l(){if(!x){h.getLayer("route")&&n(),x=!0;var r=f(c()),t=[r.shift(),r.shift()];i(d(t[0])),h.zoomTo(6),h.setCenter(t[0]);var o={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}},a=new e.GeoJSONSource({data:o});h.addSource("route",a),document.getElementById("music").checked&&w.play();var u=!0,l=!1,s=void 0;try{for(var v,p=function(){var e=_slicedToArray(v.value,2),n=e[0],u=e[1];setTimeout(function(){t.push(u),a.setData(o),h.setCenter(u);var e=d(u);e&&i(e),n===r.length-1&&(x=!1)},k*n)},m=y(r)[Symbol.iterator]();!(u=(v=m.next()).done);u=!0)p()}catch(b){l=!0,s=b}finally{try{!u&&m["return"]&&m["return"]()}finally{if(l)throw s}}h.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"red","line-width":6}}),g.push("route")}}function s(e,r,t){return e+(r-e)*t}function d(e){var r=!0,t=!1,n=void 0;try{for(var o,a=b[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value;if(e.toString()===i.xy.toString())return i}}catch(u){t=!0,n=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(t)throw n}}}function f(e){var r={};return e.filter(function(e){return r.hasOwnProperty(e)?!1:r[e]=!0})}function y(e){var r,t,n,o,a,i,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=0,t=!0,n=!1,o=void 0,c.prev=4,a=e[Symbol.iterator]();case 6:if(t=(i=a.next()).done){c.next=14;break}return u=i.value,c.next=10,[r,u];case 10:r++;case 11:t=!0,c.next=6;break;case 14:c.next=20;break;case 16:c.prev=16,c.t0=c["catch"](4),n=!0,o=c.t0;case 20:c.prev=20,c.prev=21,!t&&a["return"]&&a["return"]();case 23:if(c.prev=23,!n){c.next=26;break}throw o;case 26:return c.finish(23);case 27:return c.finish(20);case 28:case"end":return c.stop()}},v[0],this,[[4,16,20,28],[21,,23,27]])}var v=[y].map(regeneratorRuntime.mark),p={},h=void 0,m=void 0,b=[],g=[],w=void 0,x=!1,S=50,k=150;return p.init=function(){r(),t()},p}(mapboxgl);